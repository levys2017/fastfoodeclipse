<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="../templates/template.xhtml">

	

		 <title>..::FASTFOOD- CADASTRO::..</title>

	<ui:define name="conteudo">
		<h:form id="fprinc">
					
						<div>
							<h2>Pedidos</h2>
						</div>
					       
					    <p:dataTable id="tip" var="p" value="#{principalbean.pedidoSelected}" selectionMode="single" selection="#{principalbean.pedidoSelectedTable}" rowKey="#{p.id}"  emptyMessage="Nenhum item selecionado" reflow="true">
							<p:ajax event="rowSelect" listener="#{principalbean.pedidoSelectedTable}" update=":fprinc tip"></p:ajax>
									<p:column headerText="CÃ³digo" width="70">
										<h:outputText value="#{p.id}"></h:outputText>						
									</p:column>
									<p:column headerText="Nome">
										<h:outputText value="#{p.cliente.nome}"></h:outputText>						
									</p:column>
									<p:column headerText="Forma de Pagamento">
										<h:outputText value="#{p.forma_pagamento}"></h:outputText>						
									</p:column>
									<p:column headerText="Valor Total" width="100">
										<h:outputText value= "#{p.valor_total}"><f:convertNumber type="currency"></f:convertNumber></h:outputText>	
									</p:column>
									<p:column headerText="Valor Pago" width="100">
										<h:outputText value= "#{p.valor_pago}"><f:convertNumber type="currency"></f:convertNumber></h:outputText>	
									</p:column>
									<p:column headerText="Status">
										<h:outputText value= "#{principalbean.status()}"></h:outputText>	
									</p:column>
									
									<p:column>
									     <p:commandLink update=":fprinc:pDetail" onclick="PF('pDialog').show()" title="Detalhes">
						                 	<h:outputText styleClass="ui-icon ui-icon-search" style="margin:5 auto;" />
						                    <f:setPropertyActionListener value="#{p}" target="#{principalbean.produtoSelected}" />
						                </p:commandLink>
										<p:commandLink update=":fprinc"  title="Alterar" action="#{principalbean.excluir()}">
							            	<h:outputText value="  Alterar " style="margin:0 auto;" />
							            	<f:setPropertyActionListener value="#{it}" target="#{principalbean.itemPedidoSelected}" />
							            </p:commandLink>
										<p:commandLink update=":fprinc"  title="Remover" action="#{principalbean.excluir()}">
							            	<h:outputText value="Remover " style="margin:0 auto;" />
							            	<f:setPropertyActionListener value="#{it}" target="#{principalbean.itemPedidoSelected}" />
							            </p:commandLink>
									</p:column>
										
						</p:dataTable>

						<p:dialog header="Item" widgetVar="pDialog" modal="true" showEffect="fade" hideEffect="fade" resizable="false">
					        <p:outputPanel id="pDetail" style="text-align:center;">
					            <p:panelGrid  columns="2" rendered="#{principalbean.produtoSelected.id>0}" columnClasses="label,value">
					                <f:facet name="header">
					                    <p:graphicImage url="img/#{principalbean.produtoSelected.imagem}" width="90" height="80"/> 
					                </f:facet>
					 
					                <h:outputText value="" />
					                <h:outputText value="#{principalbean.produtoSelected.nome}" />
					 
					                <h:outputText value="valor" />
					                <h:outputText value="#{principalbean.produtoSelected.valor}" > 
					                		<f:convertNumber type="currency"></f:convertNumber>
					                </h:outputText>
					 
					                <h:outputText value="Desc." />
					                <h:outputText value="#{principalbean.produtoSelected.descricao}" />
							
									<p:commandLink   title="Comprar" action="#{principalbean.additem}">
					                    <h:outputText value="Adicionar" style="margin:0 auto;" />
					                    <f:setPropertyActionListener value="#{p}" target="#{principalbean.produtoSelected}" />
					                </p:commandLink>
		      
						       </p:panelGrid>
				        	</p:outputPanel>
				    	</p:dialog>
		</h:form>
		
		
		
		
	</ui:define>
</ui:composition>